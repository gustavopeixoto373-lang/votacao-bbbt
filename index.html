<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Votação BBB</title>
<style>
body{font-family:sans-serif;background:#0d0f14;color:#e9ecf1;margin:0;padding:20px;}
.card{background:#141824;padding:12px;border-radius:12px;margin-bottom:12px;}
.btn{padding:6px 12px;background:orange;color:#fff;border:none;border-radius:8px;cursor:pointer;margin-top:8px;}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;}
.modal.open{display:flex;}
.sheet{background:#141824;padding:20px;border-radius:12px;max-width:400px;width:90%;}
</style>
</head>
<body>

<h1>Paredão</h1>
<div id="grid"></div>

<div class="modal" id="voteModal">
  <div class="sheet">
    <h3 id="voteName"></h3>
    <div><input type="checkbox" id="chkHuman"/> Não sou robô</div>
    <div>Quanto é <span id="challenge"></span>? <input id="answer" type="number"/></div>
    <div style="margin-top:10px;">
      <button class="btn" id="confirmVote">Confirmar</button>
      <button class="btn" id="cancelVote">Cancelar</button>
    </div>
    <div id="voteError" style="color:red;display:none;">Erro na validação!</div>
  </div>
</div>

<div class="modal" id="adminModal">
  <div class="sheet">
    <h3>Admin</h3>
    <div><button class="btn" id="closeAdmin">Fechar</button></div>
    <div style="margin-top:10px;" id="adminContent"></div>
  </div>
</div>

<script>
let contestants = [
  {id:'ana',nome:'Ana',votos:0},
  {id:'bruno',nome:'Bruno',votos:0},
  {id:'carol',nome:'Carol',votos:0}
];

function renderGrid(){
  const grid=document.getElementById('grid'); grid.innerHTML='';
  contestants.forEach(c=>{
    const div=document.createElement('div'); div.className='card';
    div.innerHTML=`<strong>${c.nome}</strong><br>Votos: ${c.votos}`;
    const btn=document.createElement('button'); btn.className='btn'; btn.textContent='Votar';
    btn.onclick=()=>openVote(c.id);
    div.appendChild(btn); grid.appendChild(div);
  });
}

function openVote(id){
  const c=contestants.find(x=>x.id===id);
  if(!c) return;
  document.getElementById('voteName').textContent=c.nome;
  const a=Math.floor(Math.random()*10), b=Math.floor(Math.random()*10);
  document.getElementById('challenge').textContent=`${a}+${b}`;
  document.getElementById('challenge').dataset.answer=a+b;
  document.getElementById('chkHuman').checked=false;
  document.getElementById('answer').value='';
  document.getElementById('voteError').style.display='none';
  document.getElementById('voteModal').classList.add('open');
  document.getElementById('confirmVote').onclick=()=>{
    const ans=parseInt(document.getElementById('answer').value);
    if(!document.getElementById('chkHuman').checked || ans!==a+b){
      document.getElementById('voteError').style.display='block'; return;
    }
    c.votos++;
    document.getElementById('voteModal').classList.remove('open');
    renderGrid();
  };
}

document.getElementById('cancelVote').onclick=()=>document.getElementById('voteModal').classList.remove('open');

// Admin Shift+F
document.addEventListener('keydown', e=>{
  if(e.shiftKey && e.key.toLowerCase()==='f'){
    document.getElementById('adminModal').classList.add('open');
    const ac=document.getElementById('adminContent');
    ac.innerHTML=contestants.map(c=>`${c.nome} - ${c.votos} votos`).join('<br>');
  }
});
document.getElementById('closeAdmin').onclick=()=>document.getElementById('adminModal').classList.remove('open');

renderGrid();
</script>

</body>
</html>
